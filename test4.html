<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>4. Organely eukaryotickej bunky</title>
<style>
  :root{
    --bg:#f6f8fa;
    --card:#ffffff;
    --primary:#0b63d6;
    --ok:#c8f2c8;
    --bad:#f8caca;
    --muted:#666;
    --shadow: 0 2px 8px rgba(15,15,15,0.06);
  }
  body{
    font-family: Arial, Helvetica, sans-serif;
    background:var(--bg);
    margin:0;
    padding:20px;
    color:#111;
  }
  header{
    text-align:center;
    margin-bottom:18px;
  }
  h1{
    margin:6px 0 2px;
    font-size:22px;
  }
  p.lead{ margin:0; color:var(--muted); }

  .controls{
    text-align:center;
    margin:14px 0 22px;
  }
  button{
    background:var(--primary);
    color:white;
    border:none;
    padding:8px 12px;
    margin:6px;
    border-radius:6px;
    cursor:pointer;
    font-size:14px;
  }
  button.secondary{ background:#666; }
  button.ghost{ background:transparent; color:var(--primary); border:1px solid var(--primary); }
  .result{
    text-align:center;
    margin-top:12px;
    font-weight:600;
  }

  #quiz{ max-width:980px; margin:0 auto; }

  .question{
    background:var(--card);
    padding:12px 14px;
    border-radius:8px;
    box-shadow:var(--shadow);
    margin-bottom:12px;
  }
  .q-title{ font-weight:700; margin:0 0 8px; }
  .q-text{ margin:0 0 10px; white-space:normal; }
  .answers label{
    display:block;
    padding:6px 8px;
    border-radius:6px;
    margin:4px 0;
    cursor:pointer;
  }
  .answers input{ margin-right:8px; }
  .answers label.correct{ background:var(--ok); }
  .answers label.incorrect{ background:var(--bad); }
  .q-actions{ margin-top:8px; display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
  .q-actions button{ padding:6px 10px; font-size:13px; }
  .hidden{ display:none !important; }
  .small{ font-size:13px; color:var(--muted); }
  footer{ max-width:980px; margin:18px auto; text-align:center; color:var(--muted); font-size:13px; }
</style>
</head>
<body>
<header>
  <h1>4. Organely eukaryotickej bunky</h1>
  <p class="lead"></p>
</header>

<div class="controls">
  <button onclick="vyhodnot()">Vyhodnotiť všetko</button>
  <button onclick="zobrazSpravneVsetky()">Zobraziť všetky správne odpovede</button>
  <button onclick="zobrazChybne()">Zobraziť len chybné otázky</button>
  <button id="btn-retry-wrong" class="secondary">Spustiť znovu len s chybnými</button>
  <button class="secondary" onclick="zobrazVsetky()">Zobraziť všetky otázky</button>
  <button class="ghost" onclick="obnov()">Obnoviť test</button>
  <div id="vysledok" class="result"></div>
</div>

<div id="quiz"></div>

<footer>
  Ulož súbor ako test.html a otvor v prehliadači. Otázky obsahujú presné texty a odpovede tak, ako boli poskytnuté.
</footer>

<script>
/* ====== KĽÚČ SPRÁVNYCH ODPOVEDÍ (S / N) ======
   'S' = správna, 'N' = nesprávna
   (riadky 1..60) */
const kluc = [
"SNSN","NNSN","NSSS","SNSS","NSNS","NSSS","SNSS","SSNS","NSSN","NSNS",
"SSSS","SSNN","NSNN","NNNS","NNSN","SNSN","SNSS","NNNS","SSSN","NSNN",
"SSSS","NSSN","NSNN","NNSS","NSSN","NSNN","NSSN","SNNN","SSSN","SNNN",
"NNSN","SNNS","SNSS","SSSN","NNSN","SNSN","SSNN","SNSN","NNSS","SNNN",
"SNNS","NNSS","SSNN","SNSS","NSSS","NSSN","NSNN","NSSN","SSSS","SNSN",
"SNSS","SNSN","SNSS","NNSN","NSSN","NSSN","NNSS","NSSN","SSNN","SSNN"
];

/* ====== OTÁZKY A PRESNÉ ODPOVEDE (texty rovnaké ako v tvojom vstupe) ====== */
const questions = [
{ q: "1. Aké organely sú typické pre všetky eukaryotické bunky?",
  a: [
    "a) cytoskelet zložený z aktínových, tubulínových a intermediárnych filamentov",
    "b) pravé jadro, ktoré nie je ohraničené membránou",
    "c) endomembránový systém",
    "d) glykokalyx"
  ]},
{ q: "2. Aké organely a štruktúry obsahujú všetky prokaryotické aj eukaryotické bunky?",
  a: [
    "a) mitochondrie, pravé jadro, ribozómy, cytoplazmu",
    "b) ribozómy, cytoplazmu, cytoplazmatickú membránu, glykokalyx",
    "c) ribozómy, cytoplazmu, cytoplazmatickú membránu, DNA",
    "d) pravé jadro, ribozómy, DNA, lyzozómy"
  ]},
{ q: "3. Aké sú hlavné úlohy cytoskeletu v bunke?",
  a: [
    "a) je to vonkajšia kostra buniek",
    "b) umožňuje pohyb niektorých baktérií",
    "c) zohráva úlohu pri bunkovom delení",
    "d) umožňuje efektívny transport molekúl v bunkách"
  ]},
{ q: "4. Bunkové jadro:",
  a: [
    "a) je koordinačným a riadiacim centrom bunky",
    "b) prokaryotických buniek je zložené z jadrovej membrány, jadrovej matrix a chromatínu",
    "c) obsahuje genetickú informáciu",
    "d) je obalené dvojitou jadrovou membránou"
  ]},
{ q: "5. Cielená likvidácia vybraných proteínov sa uskutočňuje:",
  a: [
    "a) v peroxizómoch",
    "b) v proteazómoch",
    "c) disjunkciou",
    "d) ubikvitináciou"
  ]},
{ q: "6. Cytoplazma:",
  a: [
    "a) je vonkajším prostredím bunky",
    "b) je schopná sa meniť zo sólu na gél a naopak",
    "c) je polotekutá",
    "d) bielkoviny a ich hydratačný plášť najviac ovplyvňujú jej viskozitu"
  ]},
{ q: "7. Čo je to nukleoid?",
  a: [
    "a) jadro prokaryotickej bunky",
    "b) jadro eukaryotickej bunky",
    "c) jadro bakteriálnej bunky",
    "d) kruhová molekula DNA"
  ]},
{ q: "8. Čo patrí medzi syntetické centrá bunky?",
  a: [
    "a) endoplazmatické retikulum",
    "b) jadro",
    "c) lyzozóm",
    "d) Golgiho aparát"
  ]},
{ q: "9. Čo tvorí jadro prokaryotickej bunky?",
  a: [
    "a) dve cirkulárne molekuly dvojvláknovej DNA",
    "b) jedna cirkulárna molekula dvojvláknovej DNA",
    "c) nukleoid",
    "d) jadierko"
  ]},
{ q: "10. Jadierko:",
  a: [
    "a) je súčasťou prokaryotickej bunky",
    "b) je súčasťou eukaryotickej bunky",
    "c) je miestom syntézy tRNA",
    "d) nachádzajú sa v ňom molekuly DNA, RNA a proteínov"
  ]},
{ q: "11. Jadro eukaryotickej bunky:",
  a: [
    "a) je koordinačným a riadiacim centrom bunky",
    "b) obsahuje genetickú informáciu",
    "c) môže obsahovať jedno alebo viac jadierok",
    "d) sa skladá z jadrovej membrány, jadrovej matrix a chromatínu"
  ]},
{ q: "12. Jadro eukaryotickej bunky:",
  a: [
    "a) je koordinačným a riadiacim centrom bunky",
    "b) obsahuje jadrové póry",
    "c) nemôže mať viac ako jedno jadierko",
    "d) sa skladá z jadrovej membrány, matrix a jadrového chromozómu"
  ]},
{ q: "13. Jadro:",
  a: [
    "a) v prokaryotoch obsahuje DNA zbalenú do nukleotidov pomocou histónov",
    "b) u eukaryotov, prechádza cyklickými zmenami počas bunkového cyklu",
    "c) dochádza v ňom k translácii a tvorbe polypeptidov",
    "d) neobsahuje RNA"
  ]},
{ q: "14. Kde sú v bunke často lokalizované mitochondrie?",
  a: [
    "a) hneď pod cytoplazmatickou membránou",
    "b) vždy na apikálnej strane buniek",
    "c) v jadre",
    "d) v mieste, kde je najvyššia spotreba energie"
  ]},
{ q: "15. Ktoré organely živočíšnych buniek sú od okolitého prostredia vyčlenené dvojitou\nmembránou:",
  a: [
    "a) mitochondrie a jadierko",
    "b) mitochondrie a chloroplasty",
    "c) mitochondrie a jadro",
    "d) mitochondrie a endoplazmatikcé retikulum"
  ]},
{ q: "16. Ktoré tvrdenia o centrozóme sú správne?",
  a: [
    "a) centrozóm sa skladá z dvoch na seba kolmých centriolov, pričom každý tvorí deväť trojíc\n   tubulínových vlákien",
    "b) kinetochorové mikrofilamenty sa viažu na centroméru chromozómov a umožňujú ich pohyb\n   v mitóze",
    "c) nekinetochorové mikrotubuly sa podieľajú na posúvaní centrozómov na póly bunky",
    "d) centrozóm sa počas interfázy nachádza vždy v jadre bunky"
  ]},
{ q: "17. Ktoré tvrdenia o cytoskelete eukaryotickej bunky sú správne?",
  a: [
    "a) mikrotubuly sa podieľajú na transporte mechúrikov a tvorbe deliaceho vretienka",
    "b) mikrofilamenty sú tvorené tubulínom a zabezpečujú pohyb chromozómov",
    "c) intermediárne filamenty poskytujú bunke odolnosť voči ťahu a tlaku",
    "d) kinetochor je bielkovinový komplex, ktorý sa počas delenia pripája na centroméru\n   chromozómov"
  ]},
{ q: "18. Ktoré tvrdenie o mitochondriách je pravdivé?",
  a: [
    "a) 80S ribozómy sú poskladané v cytoplazme a následne sú trasnportované do mitochondrií",
    "b) mitochondrie majú vlastnú genetickú informáciu, ale tá nie je exprimovaná, je to len\n   rudiment",
    "c) mitochodnriálna DNA má rovnakú štruktúru ako DNA v eukaryotickom jadre",
    "d) pre správne fungovanie mitochondrií je potrebná interakcia produktov jadrových aj\n   mitochondriálnych génov"
  ]},
{ q: "19. Ktoré tvrdenie správne popisuje jednotlivé druhy vlákien cytoskeletu?",
  a: [
    "a) mikrotubuly – duté rúrky z tubulínu, súčasť deliaceho vretienka",
    "b) mikrofilamenty – tenké vlákna z aktínu a myozínu, vytvárajú kontraktilný systém",
    "c) intermediárne filamenty – 10 nm vlákna bez kontrakcie, zvyšujú mechanickú odolnosť bunky",
    "d) mikrotrabekuly – súčasť ribozómov, zabezpečujú proteosyntézu"
  ]},
{ q: "20. Lyzozómy sú:",
  a: [
    "a) mechúriky obalené dvojitou membránou, obsahujúce DNA",
    "b) mechúriky vznikajúce odškrtením z Golgiho aparátu, obsahujúce hydrolázy",
    "c) štruktúry s oxidačnými enzýmami, ktoré detoxikujú bunku",
    "d) zásobníky glykogénu v cytoplazme"
  ]},
{ q: "21. Medzi organely eukaryotickej bunky patria:",
  a: [
    "a) Golgiho aparát",
    "b) endoplazmatické retikulum",
    "c) mitochondrie",
    "d) lyzozómy"
  ]},
{ q: "22. Mikrotubuly sa predlžujú:",
  a: [
    "a) depolymerizáciou",
    "b) polymerizáciou",
    "c) pridávaním tubulínových dimérov",
    "d) odoberaním tubulínových dimérov"
  ]},
{ q: "23. Mitochondrie vznikajú:",
  a: [
    "a) de novo v každej dcérskej bunke vzniknutej bunkovým delením",
    "b) delením existujúcich mitochondrií",
    "c) pučaním z jadra",
    "d) pučaním z endoplazmatického retikula"
  ]},
{ q: "24. Mitochondrie:",
  a: [
    "a) sú zložené z troch biologických membrán",
    "b) neobsahujú DNA",
    "c) sú miestom oxidatívnej fosforylácie",
    "d) sú maternálneho pôvodu"
  ]},
{ q: "25. Mitochondrie:",
  a: [
    "a) sú zložené z troch biologických membrán",
    "b) obsahujú DNA",
    "c) dochádza tu k terminálnej oxidácii",
    "d) sú paternálneho pôvodu"
  ]},
{ q: "26. Na obnove laminy a obalu jadra sa najviac podieľa:",
  a: [
    "a) lamín A",
    "b) lamín B",
    "c) lamín C",
    "d) lamín D"
  ]},
{ q: "27. O jadierku platí, že:",
  a: [
    "a) je to trvalá organela",
    "b) skladá sa z RNA a bielkovín",
    "c) je miestom produkcie ribozómov",
    "d) je miestom produkcie proteazómov"
  ]},
{ q: "28. Peroxizómy sa vyznačujú tým, že:",
  a: [
    "a) vznikajú odškrtením z Golgiho aparátu, obsahujú prevažne oxidačné enzýmy",
    "b) majú životnosť desiatky rokov a sú trvalou súčasťou bunky",
    "c) sú najväčšou organelou bunky, ich hlavnou funkciou je proteosyntéza",
    "d) sú kódované iba mitochondriálnymi génmi"
  ]},
{ q: "29. Podľa zloženia rozlišuje bunkové organely:",
  a: [
    "a) membránové",
    "b) zložené z bielkovín",
    "c) zložené z bielkovín a RNA",
    "d) zložené z DNA a RNA"
  ]},
{ q: "30. Pre akú organelu je typické nízke pH vnútorného prostredia?",
  a: [
    "a) lyzozóm",
    "b) jadro",
    "c) mitochondrie",
    "d) cytoplazma"
  ]},
{ q: "31. Pre akú organelu je typické vysoké pH vnútorného prostredia?",
  a: [
    "a) lyzozóm",
    "b) jadro",
    "c) mitochondria",
    "d) cytoplazma"
  ]},
{ q: "32. Ribozómy:",
  a: [
    "a) nie sú zložené z biomembrány",
    "b) sa nenachádzajú v prokaryotických bunkách",
    "c) sú miestom transkripcie",
    "d) sú miestom translácie"
  ]},
{ q: "33. Ribozómy:",
  a: [
    "a) nie sú zložené z biomembrány",
    "b) sa nenachádzajú v prokaryotických bunkách",
    "c) sú miestom transkripcie",
    "d) sú zložené z dvoch bielkovinových podjednotiek a rRNA"
  ]},
{ q: "34. Typy jadierka sú:",
  a: [
    "a) kompaktné",
    "b) s nukleolonémou",
    "c) prstencovité",
    "d) s nukleolomérou"
  ]},
{ q: "35. Z čoho sú zložené ribozómy?",
  a: [
    "a) z lipopolysacharidov",
    "b) z molekúl cholesterolu a sacharidov",
    "c) z ribonukleovej kyseliny a bielkovín",
    "d) z proteínov a lipidov"
  ]},
{ q: "36. Riasinky a bičíky:",
  a: [
    "a) sú tvorené mikrotubulami",
    "b) riasinky zabezpečujú pohyb spermií",
    "c) bičík je pohybová organela niektorých živočíšnych buniek",
    "d) sú tvorené len aktínovými filamentmi"
  ]},
{ q: "37. Centrozóm a cytoskelet:",
  a: [
    "a) centrozóm sa skladá z dvoch centriol uložených kolmo na seba",
    "b) cytoskelet sa skladá z mikrotubulov, mikrofilamentov a intermediárnych filamentov",
    "c) cytoskelet je tvorený len z bielkovín aktínu",
    "d) centrozóm má význam len v rastlinných bunkách"
  ]},
{ q: "38. Vakuoly:",
  a: [
    "a) v rastlinných bunkách pomáhajú udržiavať turgor",
    "b) v živočíšnych bunkách majú vždy rovnakú veľkosť a funkciu",
    "c) slúžia na skladovanie látok a rozklad metabolitov",
    "d) vznikajú delením jadra"
  ]},
{ q: "39. Čo je to chromatozóm?",
  a: [
    "a) prokaryotické jadro",
    "b) dekondenzovaný ribozóm",
    "c) nukleozóm stabilizovaný histónom H1",
    "d) stavebná/štruktúrna jednotka chromatínového vlákna"
  ]},
{ q: "40. Čo je to matrizóm?",
  a: [
    "a) kohorta génov kódujúcich komponenty extracelulárneho matrixu",
    "b) súbor mitochondrií v materskej bunke",
    "c) matrica na vystavanie cytoskeletu v bunke",
    "d) komplex centrozómu a mikrotubulov deliaceho vretienka"
  ]},
{ q: "41. Endomembránový systém bunky:",
  a: [
    "a) je tvorený napr. membránami endoplazmatického retikula, Golgiho aparátu, lyzozómami",
    "b) sa nachádza v prokaryotických organizmoch",
    "c) je tvorený hlavne membránovými organelami, ako sú peroxizómy a cytoskelet",
    "d) komponenty systému si môžu vymieňať látky vezikulárnym transportom"
  ]},
{ q: "42. Euchromatín:",
  a: [
    "a) je tvorený kondenzovanými úsekmi chromozómov",
    "b) ide o transkripčne neaktívny chromatín",
    "c) má jemnú, penovitú až fibrilárnu štruktúru",
    "d) je transkripčne aktívny"
  ]},
{ q: "43. Heterochromatín:",
  a: [
    "a) je tvorený kondenzovanými úsekmi chromozómov",
    "b) ide o transkripčne neaktívny chromatín",
    "c) má jemnú, penovitú až fibrilárnu štruktúru",
    "d) je transkripčne aktívny"
  ]},
{ q: "44. Histónové bielkoviny:",
  a: [
    "a) patria medzi tzv. bázické bielkoviny",
    "b) sa nevyskytujú v jadrách eukaryotických buniek",
    "c) rozdeľujeme do 6 tried",
    "d) sú posttranslačne modifikované"
  ]},
{ q: "45. Jadrová matrix:",
  a: [
    "a) neobsahuje transkriptozómy a replikozómy",
    "b) predstavuje najdôležitejšiu extrachromatínovú zložku jadra",
    "c) obsahuje enzýmy a ďalšie proteíny potrebné pre transkripciu a replikáciu",
    "d) na jej tvorbe sa podieľajú laminy A a C"
  ]},
{ q: "46. Jadrový obal:",
  a: [
    "a) oddeľuje bunku od extracelulárneho prostredia",
    "b) je tvorený dvoma biologickými membránami",
    "c) vonkajšia membrána jadrového obalu je v kontakte s endoplazmatickým retikulom a s\n   cytoplazmou",
    "d) vnútorná membrána jadrového obalu je v kontakte s endoplazmatickým retikulom a s\n   cytoplazmou"
  ]},
{ q: "47. Jedno „poschodie“ 30 nm chromatínového vlákna sa nazýva:",
  a: [
    "a) signum",
    "b) solenoid",
    "c) chromozóm",
    "d) segment"
  ]},
{ q: "48. Na výstavbe histónového oktaméru sa podieľajú:",
  a: [
    "a) H1",
    "b) H3",
    "c) H4",
    "d) H8"
  ]},
{ q: "49. Nehistónové bielkoviny asociované so skafoldom a jadrovou matrix sú:",
  a: [
    "a) proteíny zabezpečujúce teritóriá chromozómov",
    "b) enzýmy, ktoré odstraňujú torzné napätie",
    "c) proteíny, ktoré vykonávajú transkripciu",
    "d) proteíny, ktoré vykonávajú replikáciu"
  ]},
{ q: "50. Pórový komplex sa skladá z:",
  a: [
    "a) jednej centrálnej granuly",
    "b) jednej bočnej granuly",
    "c) diafragmy",
    "d) karyotheky"
  ]},
{ q: "51. Nehistónové bielkoviny chromozómu:",
  a: [
    "a) majú prevažne regulačnú funkciu",
    "b) nemajú vplyv na vnútornú organizáciu interfázového jadra",
    "c) sú skafoldové proteíny tvoriace ultraštruktúru chromozómov",
    "d) zabezpečujú ochranu teritória chromozómu a dynamiku chromatínových slučiek v ňom"
  ]},
{ q: "52. V akých iných organelách eukaryotických buniek okrem jadra sa môžu vyskytovať\ngény?",
  a: [
    "a) v mitochondriách",
    "b) v Golgiho aparáte",
    "c) v chloroplastoch",
    "d) v lyzozómoch"
  ]},
{ q: "53. Základné komponenty cytoskeletu sú:",
  a: [
    "a) intermediárne filamenty",
    "b) centroméra",
    "c) mikrotubuly",
    "d) mikrofilamenty"
  ]},
{ q: "54. Globulárny aktín je základnou stavebnou:",
  a: [
    "a) intermediarnych filamentov",
    "b) mikrotubulov",
    "c) mikrofilamentov",
    "d) aktínoidov"
  ]},
{ q: "55. Jadrové póry:",
  a: [
    "a) sa nachádzajú na vnútornej strane jadrového obalu",
    "b) sú tvorené z proteínových vlákien a granúl, ktoré spolu vytvárajú pórový komplex",
    "c) zabezpečujú aktívny transport látok z jadra do cytoplazmy",
    "d) sa nachádzajú v jadrovej membráne prokaryotických buniek"
  ]},
{ q: "56. Medzi jednomembránové organely patria:",
  a: [
    "a) ribozómy a jadierko",
    "b) Golgiho aparát a peroxizómy",
    "c) lyzozómy a endoplazmatické retikulum",
    "d) mitochondrie a chloroplasty"
  ]},
{ q: "57. Jadrové póry:",
  a: [
    "a) majú priemer cca 100 μm",
    "b) sa nachádzajú v jadrovej membráne prokaryotických buniek",
    "c) zabezpečujú aktívny transport z jadra do cytoplazmy",
    "d) sú tvorené z proteínových vlákien a granúl"
  ]},
{ q: "58. Medzi organely eukaryotických buniek ktoré sú tvorené jednou biomembránou\npatria:",
  a: [
    "a) chloroplasty, mitochondrie",
    "b) Golgiho aparát",
    "c) peroxizómy, lyzozómy",
    "d) jadierko, jadro"
  ]},
{ q: "59. Membránové organely poznáme zložené z:",
  a: [
    "a) jednej membrány, napr. endoplazmatické retikulum",
    "b) dvoch membrán (obal jadra, mitochondrie a chloroplasty)",
    "c) dvoch membrán, napr. Golgiho aparát",
    "d) jednej membrány (obal jadra, mitochondrie a chloroplasty)"
  ]},
{ q: "60. Z koľkých biomembrán sú tvorené mitochondrie?",
  a: [
    "a) z dvoch",
    "b) z dvoch – vonkajšieho obalu a vnútornej zriasenej",
    "c) z jednej",
    "d) z dvoch – vonkajšej zriasenej a vnútornej zriasenej"
  ]}
];

/* ====== VYGENERUJ HTML PRE OTÁZKY ====== */
const quizDiv = document.getElementById('quiz');

questions.forEach((item, qi) => {
  const wrap = document.createElement('div');
  wrap.className = 'question';
  wrap.id = 'q' + qi;

  const title = document.createElement('div');
  title.className = 'q-title';
  title.textContent = item.q;
  wrap.appendChild(title);

  const qtext = document.createElement('div');
  qtext.className = 'q-text small';
  // (we already have text included in title; keep this small for extra info if needed)
  wrap.appendChild(qtext);

  const ansDiv = document.createElement('div');
  ansDiv.className = 'answers';
  // create 4 checkboxes with labels
  for(let i=0;i<4;i++){
    const lab = document.createElement('label');
    lab.innerHTML = `<input type="checkbox" name="q${qi}" value="${i}"> ${item.a[i]}`;
    ansDiv.appendChild(lab);
  }
  wrap.appendChild(ansDiv);

  const actions = document.createElement('div');
  actions.className = 'q-actions';
  const showBtn = document.createElement('button');
  showBtn.textContent = 'Zobraziť správne';
  showBtn.onclick = (e)=>{
    e.preventDefault();
    zobrazSpravneJednu(qi);
  };
  actions.appendChild(showBtn);

  const clearBtn = document.createElement('button');
  clearBtn.textContent = 'Vymazať výbery';
  clearBtn.className = 'secondary';
  clearBtn.onclick = (e)=>{
    e.preventDefault();
    const boxes = wrap.querySelectorAll('input[type="checkbox"]');
    boxes.forEach(b=>b.checked=false);
    // remove highlight classes
    const labs = wrap.querySelectorAll('label');
    labs.forEach(l=>{ l.classList.remove('correct','incorrect'); });
  };
  actions.appendChild(clearBtn);

  wrap.appendChild(actions);
  quizDiv.appendChild(wrap);
});

/* ====== UTIL: získať pole pravdivostí pre otázku idx ====== */
function spravnyArray(idx){
  return kluc[idx].split('').map(ch => ch === 'S');
}

/* ====== VYHODNOTENIE celeho testu ====== 
   Počet bodov: počet OTÁZOK, ktoré má užívateľ úplne správne (t.j. presne rovnaké vybrané polia ako sú S).
*/
function vyhodnot(){
  let correctQuestions = 0;
  const total = questions.length;

  for(let qi=0; qi<total; qi++){
    const wrap = document.getElementById('q'+qi);
    const boxes = wrap.querySelectorAll('input[type="checkbox"]');
    const selected = Array.from(boxes).map(b => b.checked);
    const right = spravnyArray(qi);

    // označovanie labelov podľa správnosti jednotlivých možností
    const labels = wrap.querySelectorAll('label');
    labels.forEach((lab, idx)=>{
      lab.classList.remove('correct','incorrect');
      if(right[idx]) lab.classList.add('correct'); // always show correct as green
      if(selected[idx] && !right[idx]) lab.classList.add('incorrect'); // user's wrong picks red
    });

    // check if entire selection matches exactly
    let match = true;
    for(let k=0;k<4;k++){
      if(selected[k] !== right[k]){ match = false; break; }
    }
    // set dataset flag for filters
    wrap.dataset.chybna = match ? "false" : "true";
    if(match) correctQuestions++;
  }

  const percent = Math.round((correctQuestions / total) * 100);
  document.getElementById('vysledok').innerHTML = `Správnych otázok: ${correctQuestions} z ${total} — <span style="color:${percent>=60?'green':'#b33'}">${percent}%</span>`;
  // scroll to results
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* ====== zobrazSpravneJednu — zvýrazní správne a tvoje nesprávne vo vybranej otázke ====== */
function zobrazSpravneJednu(qi){
  const wrap = document.getElementById('q'+qi);
  const boxes = wrap.querySelectorAll('input[type="checkbox"]');
  const right = spravnyArray(qi);
  const labels = wrap.querySelectorAll('label');
  labels.forEach((lab, idx)=>{
    lab.classList.remove('correct','incorrect');
    if(right[idx]) lab.classList.add('correct');
    if(boxes[idx].checked && !right[idx]) lab.classList.add('incorrect');
  });
}

/* ====== zobrazSpravneVsetky — zvýrazni správne pre všetky otázky (ale nevyhodnotí úplne) ====== */
function zobrazSpravneVsetky(){
  for(let qi=0; qi<questions.length; qi++){
    const wrap = document.getElementById('q'+qi);
    const labels = wrap.querySelectorAll('label');
    const right = spravnyArray(qi);
    labels.forEach((lab, idx)=>{
      lab.classList.remove('correct','incorrect');
      if(right[idx]) lab.classList.add('correct');
      // mark user's incorrect if checked
      const box = wrap.querySelector(`input[value="${idx}"]`);
      if(box && box.checked && !right[idx]) lab.classList.add('incorrect');
    });
  }
  // optional: clear overall score message
  document.getElementById('vysledok').textContent = '';
}

/* ====== ZOBRAZIŤ LEN CHYBNÉ OTÁZKY (podľa posledného vyhodnotenia) ====== */
function zobrazChybne(){
  // ensure vyhodnot was called at least once; if not, call it
  if(!Array.from(document.querySelectorAll('.question')).some(q=>q.dataset.chybna)){
    vyhodnot();
  }
  const all = document.querySelectorAll('.question');
  all.forEach(q=>{
    if(q.dataset.chybna === "true") q.classList.remove('hidden');
    else q.classList.add('hidden');
  });
  // scroll to first visible
  const first = document.querySelector('.question:not(.hidden)');
  if(first) first.scrollIntoView({behavior:'smooth', block:'center'});
}

/* ====== ZOBRAZIŤ VŠETKY otázky ====== */
function zobrazVsetky(){
  document.querySelectorAll('.question').forEach(q=>q.classList.remove('hidden'));
}

/* ====== OBNOVIŤ TEST (vymaže výbery a zvýraznenia a výsledok) ====== */
function obnov(){
  document.querySelectorAll('.question').forEach(q=>{
    q.dataset.chybna = "";
    const boxes = q.querySelectorAll('input[type="checkbox"]');
    boxes.forEach(b=>b.checked=false);
    q.querySelectorAll('label').forEach(l=> l.classList.remove('correct','incorrect'));
    q.classList.remove('hidden');
  });
  document.getElementById('vysledok').textContent = '';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* ====== OPTIONAL: keyboard support - Enter on show correct of focused question ====== */
/* not necessary but could be added later */
</script>
</body>
</html>
